<!--Red and white-->

{{!-- nintendo header --}}
<div class="col-lg-8 mx-auto p-4 py-md-5">
  <header class="pb-3" id="nintendoHeader">
    <a href="/blogs/nintendo" class="d-flex align-items-center text-decoration-none"></a>
      <img class="me-2" width="65" height="65" src="/img/nitendologo.jpg"></img>
      <span class="fs-4">Nintendo</span>
    </a>
  </header>
  
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target=".postingModal" >Post</button>

<div class="modal fade postingModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5">Create a post</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form class="new-blog-post-form" data-platform=1>
          <div class="form-group">
            <label for="title">Title</label>
            <input type="title" class="form-control" id="blog-title" placeholder="Title">
          </div>
          <div class="form-group">
            <label for="subheading">Subheading</label>
            <input type="subheading" class="form-control" id="blog-subheading" placeholder="Subheading">
          </div>
          <div class="form-group">
            <label for="post">Post</label>
            <input type="post" class="form-control" id="blog-post" placeholder="Post here!" rows="4">
          </div>
          <div class="form-group">
            <label for="tag">Tag</label>
            <input type="tag" class="form-control" id="blog-tags" placeholder="Add a Tag here!">
          </div>
            <button type="submit" class="btn btn-primary btn-blog mb-2">Submit Blog</button>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="blog-container">
        <!-- Loop through ALL blog entries -->
        {{#each blogs as |blog|}}
            <article class="blog-card">
                <h2>{{blog.title}}</h2>
                <h3 class="user" data-user="{{blog.user_id}}">By {{blog.User.name}}</h3>
                <p>{{blog.sub_heading}}</p>
                <p>{{blog.post}}</p>

                <h3>Comments</h3>
                <ul class="comments-list">
                    {{#each blog.Comments as |comment|}}
                        <li>
                            <span class="comment-user user" data-user="{{comment.user_id}}">{{comment.User.name}}:</span>
                            <span class="comment-text">{{comment.comment}}</span>
                        </li>
                    {{/each}}
                </ul>
                 {{!-- Comment Post Modal --}}
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target=".commentModal{{blog.id}}">
                  Post a comment to this Blog?
                </button>
                <!-- Modal -->
                <div class="modal fade commentModal{{blog.id}}" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Make a Comment</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        <form class="new-comment-form" data-blog="{{blog.id}}">
                          <div class="form-group">
                           <label for="comment">Comment</label>
                           <input type="post" class="form-control" id="comment" placeholder="Comment here!" rows="4">
                          </div>
                          <button type="submit" class="btn btn-primary btn-comment mb-2">Submit Comment</button>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
          </article>
        {{/each}} 
    </div>
</div>

  <script src="/blogPosting.js"></script>
  <script src="/commentPosting.js"></script>